# 🚀 快速测试指南

## ✅ 修复完成

### **问题：** 
`PromptTemplates.js` 第386行语法错误 - 模板字符串中使用了反引号

### **解决方案：**
```diff
- - 必须用`{"scenarios": [...]}`包装数组
+ - 必须用 {"scenarios": [...]} 包装数组
```

---

## 🎯 立即测试步骤

### **1. 确认服务运行中**
```
✅ 后端: http://localhost:3001 (已启动)
⚠️ 前端: http://localhost:3002 (需要启动)
```

### **2. 启动前端服务**
打开**新的PowerShell窗口**，执行：
```powershell
cd D:\Users\Desktop\maijiaplug\web
npm run dev
```

等待看到：
```
➜  Local:   http://localhost:3002/
```

---

## 📝 **完整测试流程**

### **步骤1: 打开浏览器**
访问：`http://localhost:3002`

### **步骤2: 创建新报告**
1. 点击右上角 **"Create Report 创建报告"** 按钮
2. 在弹出对话框中：
   - **ASIN输入框**: `B09FL6YR9L` (Night Light产品)
   - **国家选择**: United States (默认)
3. 点击 **"开始分析"**

### **步骤3: 验证首页实时更新** ✨
**关键！** 报告应该在**首页**显示，不会跳转到详情页。

观察任务卡片的状态变化：
```
📦 准备中 (0%)
  ↓ (约5秒)
🕷️ 正在抓取评论 (10-30%)
  ↓ (约30秒)
🤖 任务进行中 (30-90%)
  ↓ (约60秒)
✅ 分析完成 (100%)
```

**验证点：**
- ✅ 任务卡片实时更新进度条
- ✅ 状态文字动态变化
- ✅ 显示产品图片（从Apify获取）
- ✅ 没有自动跳转到详情页

### **步骤4: 查看详细报告**
点击**已完成的任务卡片**，进入详情页。

---

## 🧪 **详情页验证清单**

### **页面布局：**
- ✅ 顶部显示产品图片 + 产品名称 + 评论数
- ✅ 下载按钮可见
- ✅ Tab导航：**消费者洞察** | **竞品分析**

### **消费者洞察 Tab：**

#### **1. 消费者画像** 📊
- ✅ 关键洞察摘要卡片（紫色渐变）
  - 显示：人群特征、使用时刻、使用地点、行为
  - 可点击查看原评论
- ✅ 原评论展示区
  - 显示3条提及最多特征的原评论
  - 包含：作者、星级、内容（截断）
  - "查看更多原评论"链接
- ✅ 4个柱状图：
  - 人群特征 (Persona)
  - 使用时刻 (Usage Time)
  - 使用地点 (Usage Location)
  - 行为 (Behavior)
- ✅ 每个图表显示**5个数据点**
- ✅ 响应式布局：
  - 桌面 (>1400px): 4列
  - 平板 (768-1400px): 2列
  - 手机 (<768px): 1列

#### **2. 使用场景** 🎯
- ✅ 表格显示场景、占比、描述、原因
- ✅ 数据量 >= 10条
- ✅ 默认显示10条
- ✅ "加载更多"按钮显示剩余数据
- ✅ 百分比正确（不是3100%）
- ✅ 点击场景可查看原评论

#### **3. 星级影响度** ⭐
- ✅ 5个星级维度数据
- ✅ 每个维度显示影响因子

#### **4. 产品体验** 👍👎
- ✅ 正向观点 >= 10条
- ✅ 负向观点 >= 10条
- ✅ 默认显示10条 + "加载更多"
- ✅ 百分比总和100%

#### **5. 购买动机** 💡
- ✅ 数据量 >= 10条
- ✅ 默认显示10条 + "加载更多"
- ✅ 百分比正确显示

#### **6. 未满足需求** 🔍
- ✅ 数据量 >= 10条
- ✅ 默认显示10条 + "加载更多"
- ✅ 百分比正确显示

### **竞品分析 Tab：**
- ✅ 添加竞品功能
- ✅ 多维度对比表格
- ✅ AI驱动的市场机会
- ✅ 导出Excel/PNG功能

---

## 🐛 **常见问题排查**

### **问题1: 前端无法访问**
```bash
# 检查3002端口是否被占用
netstat -ano | findstr ":3002"

# 如果被占用，关闭进程或更换端口
```

### **问题2: 创建报告失败**
打开浏览器开发者工具 (F12)：
1. **Console** - 查看JavaScript错误
2. **Network** - 查看API请求状态

### **问题3: AI分析返回空数据**
检查后端日志输出：
```
⚠️ 使用场景分析失败: ...
⚠️ 消费者画像分析失败: ...
```

可能原因：
- Gemini API配额用尽
- 网络连接问题
- 提示词格式错误

---

## 📊 **预期结果**

### **成功的标志：**
```
✅ 爬取100条评论 (Apify)
✅ 7个维度分析成功 (6/7 或 7/7)
✅ 每个维度 >= 10条数据
✅ 百分比合理（不超过100%）
✅ 数据匹配产品 (Night Light, 不是Earbuds)
✅ 原评论可查看
✅ 响应式布局正常
✅ "加载更多"功能正常
```

### **报告内容验证：**
**ASIN: B09FL6YR9L** 应该显示：
- **产品类型**: Night Light / 夜灯
- **使用场景**: 卧室照明、儿童房、夜间喂奶等
- **人群特征**: 父母、孩子、卧室用户等
- **正向观点**: 柔和光线、省电、可调亮度等
- **负向观点**: 亮度不足、按钮位置、质量问题等

**❌ 不应该显示**: Earbuds、苹果切割器等无关产品信息

---

## 🎉 **测试通过标准**

所有以下检查项都通过，则系统达到交付标准：

- [ ] 首页任务卡片实时更新
- [ ] 任务完成后可点击查看详情
- [ ] 消费者画像显示原评论
- [ ] 所有6个维度数据量 >= 10条
- [ ] 百分比显示正确
- [ ] 响应式布局在3种屏幕尺寸下正常
- [ ] "加载更多"功能正常
- [ ] 竞品分析可添加/删除
- [ ] 所有数据匹配正确的产品
- [ ] 无JavaScript错误
- [ ] 无API请求失败

---

**测试完成后请反馈结果！** 🚀

如遇问题，提供：
1. 错误截图
2. 浏览器控制台输出
3. 后端终端日志


