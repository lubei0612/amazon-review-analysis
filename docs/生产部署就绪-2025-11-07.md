# ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å°±ç»ª

**æ—¥æœŸ**: 2025-11-07  
**çŠ¶æ€**: âœ… å°±ç»ª

---

## âœ… ç³»ç»ŸçŠ¶æ€

### AIåˆ†ææ¨¡å—
- âœ… æ‰€æœ‰7ä¸ªåˆ†æç»´åº¦æ­£å¸¸å·¥ä½œ
- âœ… Fallbacké™çº§æ–¹æ¡ˆå®Œæ•´
- âœ… é”™è¯¯æ—¥å¿—å®Œå–„
- âœ… ç©ºæ•°æ®éªŒè¯æœºåˆ¶å¥å…¨

### Chromeæ’ä»¶
- âœ… åˆ†æåŠŸèƒ½æ­£å¸¸
- âœ… è‡ªåŠ¨è·³è½¬æŠ¥å‘Šé¡µé¢
- âœ… APIé…ç½®çµæ´»
- âœ… é”™è¯¯å¤„ç†å®Œå–„

### Webç«¯
- âœ… æŠ¥å‘Šåˆ—è¡¨æ˜¾ç¤ºæ­£å¸¸
- âœ… æŠ¥å‘Šè¯¦æƒ…é¡µæ¸²æŸ“æ­£å¸¸
- âœ… æ‰€æœ‰å›¾è¡¨å±•ç¤ºæ­£å¸¸
- âœ… ç¿»è¯‘åŠŸèƒ½æ­£å¸¸

---

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

### 1. ç¯å¢ƒå˜é‡é…ç½®
ç¡®ä¿ä»¥ä¸‹ç¯å¢ƒå˜é‡å·²é…ç½®ï¼š

**åç«¯ (`.env`)**:
```bash
# Apifyé…ç½®ï¼ˆå¿…éœ€ï¼‰
APIFY_API_TOKEN=your_apify_token_here

# Gemini AIé…ç½®ï¼ˆå¿…éœ€ï¼‰
GEMINI_API_KEY=your_gemini_key_here
GEMINI_MODEL=gemini-2.0-flash-exp
GEMINI_TEMPERATURE=0.7
GEMINI_MAX_TOKENS=16000

# æœåŠ¡å™¨é…ç½®
PORT=3001
NODE_ENV=production
```

### 2. Chromeæ’ä»¶URLé…ç½®
ç”Ÿäº§ç¯å¢ƒéœ€è¦ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ï¼š

**`chrome-extension/popup.js`** (ç¬¬97è¡Œ):
```javascript
const reportUrl = `https://yourdomain.com/#/report/${response.taskId}`
```

**`chrome-extension/background.js`**:
```javascript
const API_BASE_URL = 'https://yourdomain.com/api'
```

### 3. Dockeré…ç½®éªŒè¯
ç¡®è®¤ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®ï¼š
- âœ… `Dockerfile` (åç«¯)
- âœ… `docker-compose.yml` (ç¼–æ’)
- âœ… `web/Dockerfile` (å‰ç«¯)
- âœ… `.dockerignore` (æ’é™¤æ–‡ä»¶)

---

## ğŸ³ Dockeréƒ¨ç½²æ­¥éª¤

### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†ä»£ç åˆ°æœåŠ¡å™¨
git clone <your-repo-url>
cd maijiaplug

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
vim .env  # å¡«å†™çœŸå®çš„APIå¯†é’¥

# 3. ä¸€é”®å¯åŠ¨
docker-compose up -d

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# 5. éªŒè¯æœåŠ¡
curl http://localhost:3001/api/health
```

### æ–¹å¼äºŒï¼šå•ç‹¬æ„å»º

```bash
# åç«¯
docker build -t amazon-review-backend .
docker run -d -p 3001:3001 --env-file .env amazon-review-backend

# å‰ç«¯
cd web
docker build -t amazon-review-frontend .
docker run -d -p 3002:80 amazon-review-frontend
```

---

## â˜ï¸ è…¾è®¯äº‘éƒ¨ç½²

### å‡†å¤‡å·¥ä½œ
1. å¼€é€šè…¾è®¯äº‘æœåŠ¡å™¨ï¼ˆæ¨è 2æ ¸4Gï¼ŒUbuntu 20.04ï¼‰
2. å®‰è£…Dockerå’ŒDocker Compose
3. é…ç½®å®‰å…¨ç»„ï¼ˆå¼€æ”¾3001ã€3002ç«¯å£ï¼‰
4. é…ç½®åŸŸåå’ŒSSLè¯ä¹¦ï¼ˆå¯é€‰ï¼‰

### éƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash
# deploy-tencent.sh

# å®‰è£…Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# å®‰è£…Docker Compose
curl -L "https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# å…‹éš†ä»£ç 
git clone <your-repo-url> /opt/maijiaplug
cd /opt/maijiaplug

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
# æ‰‹åŠ¨ç¼–è¾‘ .env å¡«å†™APIå¯†é’¥

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable docker
```

### ä½¿ç”¨å®å¡”é¢æ¿ï¼ˆå¯é€‰ï¼‰
1. å®‰è£…å®å¡”é¢æ¿
2. å®‰è£…Dockerç®¡ç†å™¨
3. åœ¨é¢æ¿ä¸­å¯¼å…¥ `docker-compose.yml`
4. é…ç½®ç¯å¢ƒå˜é‡
5. ä¸€é”®å¯åŠ¨

---

## ğŸ”§ ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–

### 1. Nginxåå‘ä»£ç†ï¼ˆæ¨èï¼‰

```nginx
# /etc/nginx/sites-available/maijiaplug

server {
    listen 80;
    server_name yourdomain.com;
    
    # å‰ç«¯
    location / {
        proxy_pass http://localhost:3002;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # åç«¯API
    location /api {
        proxy_pass http://localhost:3001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

### 2. PM2è¿›ç¨‹ç®¡ç†ï¼ˆéDockerï¼‰

```bash
npm install -g pm2

# å¯åŠ¨åç«¯
pm2 start server.js --name amazon-backend

# å¯åŠ¨å‰ç«¯
cd web
pm2 serve dist 3002 --name amazon-frontend

# ä¿å­˜é…ç½®
pm2 save
pm2 startup
```

### 3. æ—¥å¿—ç®¡ç†

```bash
# Dockeræ—¥å¿—è½®è½¬
vim /etc/docker/daemon.json
{
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "10m",
    "max-file": "3"
  }
}
```

---

## ğŸ§ª éƒ¨ç½²åéªŒè¯

### 1. åç«¯å¥åº·æ£€æŸ¥
```bash
curl http://your-server:3001/api/health
# æœŸæœ›è¿”å›: {"success":true,"message":"Amazonè¯„è®ºåˆ†ææœåŠ¡è¿è¡Œä¸­"}
```

### 2. åˆ›å»ºæµ‹è¯•ä»»åŠ¡
```bash
curl -X POST http://your-server:3001/api/tasks/create \
  -H "Content-Type: application/json" \
  -d '{"asin": "B0CHWRXH8B"}'
# æœŸæœ›è¿”å›: {"success":true,"data":{"taskId":"..."}}
```

### 3. æ£€æŸ¥ä»»åŠ¡çŠ¶æ€
```bash
curl http://your-server:3001/api/tasks/{taskId}/status
```

### 4. å‰ç«¯è®¿é—®æµ‹è¯•
æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://your-server:3002`

---

## ğŸ“± Chromeæ’ä»¶æ‰“åŒ…

### å¼€å‘ç‰ˆæµ‹è¯•
1. æ‰“å¼€ `chrome://extensions/`
2. å¯ç”¨"å¼€å‘è€…æ¨¡å¼"
3. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
4. é€‰æ‹© `chrome-extension/` ç›®å½•

### ç”Ÿäº§ç‰ˆæ‰“åŒ…
```bash
cd chrome-extension

# 1. ä¿®æ”¹manifest.jsonä¸­çš„ç‰ˆæœ¬å·
vim manifest.json

# 2. æ‰“åŒ…
zip -r amazon-review-analyzer.zip . \
  -x "*.git*" -x "*.md" -x "node_modules/*"

# 3. ä¸Šä¼ åˆ°Chrome Web Storeï¼ˆå¯é€‰ï¼‰
```

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

```bash
# åœæ­¢æœåŠ¡
docker-compose down

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

---

## ğŸ“Š ç›‘æ§å’Œè¿ç»´

### æ—¥å¿—æŸ¥çœ‹
```bash
# Docker Compose
docker-compose logs -f backend
docker-compose logs -f frontend

# PM2
pm2 logs amazon-backend
pm2 logs amazon-frontend
```

### æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹PM2è¿›ç¨‹
pm2 monit
```

### å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®åº“ï¼ˆå¦‚æœæœ‰ï¼‰
# å¤‡ä»½ç¯å¢ƒå˜é‡
cp .env .env.backup
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tunlp | grep 3001
netstat -tunlp | grep 3002

# ä¿®æ”¹docker-compose.ymlä¸­çš„ç«¯å£æ˜ å°„
```

### 2. APIå¯†é’¥å¤±æ•ˆ
```bash
# æ›´æ–°.envæ–‡ä»¶
vim .env

# é‡å¯æœåŠ¡
docker-compose restart backend
```

### 3. å†…å­˜ä¸è¶³
```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# å¢åŠ swap
dd if=/dev/zero of=/swapfile bs=1M count=2048
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
```

---

## ğŸ¯ éƒ¨ç½²æ€»ç»“

### æœ€ç®€å•çš„éƒ¨ç½²æ–¹å¼
```bash
# 1. æœåŠ¡å™¨æ‰§è¡Œ
git clone <your-repo-url>
cd maijiaplug

# 2. é…ç½®APIå¯†é’¥
cp env.example .env
# ç¼–è¾‘.envå¡«å†™çœŸå®å¯†é’¥

# 3. ä¸€é”®å¯åŠ¨
docker-compose up -d

# 4. éªŒè¯
curl http://localhost:3001/api/health
```

### å®¢æˆ·ä½¿ç”¨æµç¨‹
1. å®‰è£…Chromeæ’ä»¶ï¼ˆå¼€å‘ç‰ˆï¼šåŠ è½½`chrome-extension/`æ–‡ä»¶å¤¹ï¼‰
2. è®¿é—®Amazonäº§å“é¡µé¢
3. ç‚¹å‡»æ’ä»¶å›¾æ ‡ï¼Œå¼€å§‹åˆ†æ
4. è‡ªåŠ¨è·³è½¬åˆ°Webç«¯æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š

---

**ğŸ‰ ç³»ç»Ÿå·²å®Œå…¨å°±ç»ªï¼Œå¯ä»¥ç«‹å³éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼**



