# 🎯 Web端创建报告 - 用户指南

**更新时间**: 2025-10-27  
**功能状态**: ✅ 已实现并测试通过

---

## 📖 快速开始（3步完成）

### 步骤1: 启动服务

打开**两个终端**：

**终端1 - 后端**:
```bash
npm start
```
看到 `🚀 服务器运行在: http://localhost:3001` 表示成功

**终端2 - Web前端**:
```bash
cd web
npm run dev
```
看到 `Local: http://localhost:3002/` 表示成功

### 步骤2: 访问Web页面

浏览器打开: `http://localhost:3002`

### 步骤3: 创建报告

1. 在搜索框输入ASIN或产品链接
   - 例如: `B08S7NJLMG`
   - 或: `https://www.amazon.com/dp/B08S7NJLMG`

2. 点击"Search"按钮

3. 在弹出的对话框中，点击"开始分析"

4. **自动跳转到报告页面**，显示加载动画和进度

5. 等待1-2分钟，完整的分析报告就会显示出来！

---

## 🎬 使用演示

### 场景1: 通过搜索框创建报告

```
访问首页
  ↓
在搜索框输入: B08S7NJLMG
  ↓
点击"Search"
  ↓
弹出对话框 → 确认信息 → 点击"开始分析"
  ↓
自动跳转到报告页面
  ↓
看到加载动画: "正在获取分析结果..."
  ↓
实时进度更新:
  - "准备中 0%"
  - "正在抓取评论 15%"
  - "AI分析中 75%"
  ↓
1-2分钟后显示完整报告！
```

### 场景2: 通过"创建报告"按钮

```
首页点击"创建第一个报告"
  ↓
输入ASIN: B08S7NJLMG
  ↓
选择国家站点（默认US）
  ↓
点击"开始分析"
  ↓
（后续流程同上）
```

---

## 📝 支持的输入格式

### ✅ 有效的输入

**纯ASIN**:
```
B08S7NJLMG
B0BSHF7WHW
B08N5WRWNW
```

**完整产品URL**:
```
https://www.amazon.com/dp/B08S7NJLMG
https://www.amazon.com/Apple-Slicer-Corer/dp/B08S7NJLMG/ref=sr_1_3
http://amazon.com/dp/B08S7NJLMG
```

### ❌ 无效的输入

```
B08S7NJL          ← 少于10位
ABC123456789      ← 超过10位
apple slicer      ← 关键词搜索（暂不支持）
```

---

## 🌍 支持的国家站点

| 国家 | 站点域名 | 标志 |
|------|---------|------|
| 🇺🇸 United States | amazon.com | 默认 |
| 🇬🇧 United Kingdom | amazon.co.uk | |
| 🇩🇪 Germany | amazon.de | |
| 🇫🇷 France | amazon.fr | |
| 🇯🇵 Japan | amazon.co.jp | |
| 🇨🇦 Canada | amazon.ca | |

---

## ⏱️ 预期时间

| 阶段 | 时间 | 说明 |
|------|------|------|
| 任务创建 | 1-2秒 | 验证ASIN并创建任务 |
| 评论爬取 | 10-30秒 | 取决于评论数量（默认500条） |
| AI分析 | 30-60秒 | Gemini 2.5 Pro分析 |
| **总计** | **40-90秒** | 完整流程 |

---

## 📊 报告内容

### 分析模块（完整版）

Web端显示**所有分析结果**，而不是只有Top 5：

1. **消费者画像** - 性别、年龄、职业、家庭结构
2. **使用场景** - 所有提到的使用场景
3. **星级影响度** - 不同星级分布及原因
4. **产品体验** - 所有优点和缺点
5. **购买动机** - 所有购买原因
6. **未被满足的需求** - 所有用户需求

### 数据特点

- ✅ **完整数据**: 不限制显示数量
- ✅ **百分比正确**: 所有项目百分比总和为100%
- ✅ **可下载**: 支持Excel、图片等格式
- ✅ **可翻译**: 中英文切换

---

## 🆚 与Chrome扩展的区别

| 特性 | Chrome扩展 | Web端 |
|------|-----------|-------|
| **使用场景** | 在Amazon产品页快速分析 | 独立创建，无需访问Amazon |
| **输入方式** | 自动提取当前页面信息 | 手动输入ASIN |
| **显示内容** | Top 5（快速预览） | 完整数据（深度分析） |
| **百分比计算** | 相对于总项目数（可能<100%） | 总和为100% |
| **适用场景** | 快速决策 | 详细研究 |

**建议**:
- 快速浏览 → 用Chrome扩展
- 深度分析 → 用Web端
- 可以两者结合使用！

---

## 🐛 常见问题

### Q1: 点击"开始分析"没有反应？

**检查**:
1. 后端是否启动？（看终端是否显示 `服务器运行在: http://localhost:3001`）
2. 浏览器控制台是否有错误？（按F12查看）
3. ASIN格式是否正确？（必须是10位字母数字）

**解决**:
```bash
# 重启后端
npm start

# 重启Web前端
cd web
npm run dev
```

### Q2: 显示"任务失败"？

**原因**: 
- Outscraper API返回空数据（不稳定）
- Puppeteer被Amazon拦截
- RapidAPI未配置

**解决**:
1. **等待1分钟后重试**（Outscraper可能恢复）
2. 检查Outscraper配额: https://app.outscraper.com/profile
3. 配置RapidAPI Key到`.env`文件（提高成功率）

### Q3: 页面一直显示"正在抓取评论"？

**正常**！这是因为爬取500条评论需要时间。

**时间参考**:
- 10-30秒: 正常
- 30-60秒: 偏慢但可接受
- 超过2分钟: 可能有问题，检查后端日志

### Q4: 报告页面是空白？

**原因**: 
- taskId错误
- 任务还在进行中（需要等待）

**解决**:
- 检查URL中的taskId是否正确
- 等待加载动画完成
- 如果一直加载，重新创建报告

### Q5: 支持关键词搜索吗？

**目前不支持**。只支持ASIN或产品URL。

未来版本可能会支持关键词 → 搜索产品 → 分析的完整流程。

---

## 💡 使用技巧

### 技巧1: 批量分析

虽然不支持批量输入，但你可以：
1. 创建第一个报告
2. 等待完成
3. 返回首页
4. 创建第二个报告
5. 重复...

报告会保存在首页的列表中（未来功能）。

### 技巧2: 提高成功率

1. **选择流行产品**: 评论数多的产品成功率更高
2. **配置多个爬虫**: Outscraper + RapidAPI + Puppeteer
3. **失败后重试**: 等待1分钟后重新分析
4. **检查配额**: 确保Outscraper有足够积分

### 技巧3: 快速分析

如果只想快速了解产品：
1. 使用Chrome扩展（Top 5）
2. 如果需要更多信息，再使用Web端

### 技巧4: 保存报告

1. 在报告页面点击"下载"按钮
2. 选择Excel或图片格式
3. 保存到本地
4. 下次可以直接查看，无需重新分析

---

## 🔄 完整流程图

```
┌─────────────────┐
│  访问首页       │
│  localhost:3002 │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  输入ASIN      │
│  B08S7NJLMG    │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  点击Search     │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  确认对话框     │
│  开始分析       │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  后端API       │
│  创建任务       │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  跳转报告页     │
│  /report/:id    │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  显示加载动画   │
│  轮询状态       │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  爬取评论       │
│  (10-30秒)     │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  AI分析        │
│  (30-60秒)     │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  显示完整报告   │
│  ✅ 完成       │
└─────────────────┘
```

---

## 📞 需要帮助？

### 检查服务状态

**后端**:
```bash
# 查看是否在运行
curl http://localhost:3001/api/tasks/status
```

**Web前端**:
```bash
# 浏览器访问
http://localhost:3002
```

### 查看日志

**后端日志**:
- 查看终端1（运行`npm start`的窗口）
- 看是否有错误信息

**浏览器日志**:
- 按F12打开开发者工具
- 切换到Console标签页
- 看是否有红色错误

---

## 🎉 开始使用吧！

现在您已经了解了如何使用Web端创建报告。

**最简单的开始方式**:
1. 确保后端和前端都在运行
2. 访问 http://localhost:3002
3. 输入 `B08S7NJLMG`
4. 点击"Search" → "开始分析"
5. 等待1-2分钟
6. 查看完整的分析报告！

---

**版本**: v1.2-stable  
**更新时间**: 2025-10-27  
**状态**: ✅ 完全可用


