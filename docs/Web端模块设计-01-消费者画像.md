# Webç«¯æ¨¡å—è®¾è®¡ - æ¶ˆè´¹è€…ç”»åƒ

**æ¨¡å—åç§°**: æ¶ˆè´¹è€…ç”»åƒ  
**å›¾æ ‡**: ğŸ‘¥  
**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-21

---

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

### åŠŸèƒ½è¯´æ˜
åˆ†æè¯„è®ºä¸­æåˆ°çš„äººç¾¤ç‰¹å¾ï¼ˆsonã€daughterç­‰ï¼‰ã€ä½¿ç”¨æ—¶åˆ»ï¼ˆeverydayã€nightç­‰ï¼‰ã€ä½¿ç”¨åœ°ç‚¹ï¼ˆgymã€homeç­‰ï¼‰ã€è¡Œä¸ºï¼ˆworkoutã€listeningç­‰ï¼‰ï¼Œå¸®åŠ©å–å®¶äº†è§£ç›®æ ‡ç”¨æˆ·ç¾¤ä½“ã€‚

### æ•°æ®å±•ç¤º
- æ˜¾ç¤º**æ‰€æœ‰**å…³é”®è¯æ•°æ®ï¼ˆä¸é™äºTOP5ï¼‰
- æ•°æ®å æ¯”æ€»å’Œ=100%
- é‡‡ç”¨å †å æŸ±çŠ¶å›¾å¯è§†åŒ–ï¼ˆçº¢è‰²å·®è¯„+ç»¿è‰²å¥½è¯„ï¼‰

---

## ğŸ¨ UIè®¾è®¡

### æ•´ä½“å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ æ¶ˆè´¹è€…ç”»åƒ                         ç¿»è¯‘  [ä¸‹è½½â–¼]            â”‚
â”‚  åˆ†æè¯„è®ºä¸­æåŠçš„äººç¾¤ç‰¹å¾ï¼Œå¸®åŠ©ä½ å‘ç°æ½œåœ¨åˆä½œä¼™ä¼´å’Œå—ä¼—         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚äººç¾¤ç‰¹å¾  â”‚  â”‚ä½¿ç”¨æ—¶åˆ»  â”‚  â”‚ä½¿ç”¨åœ°ç‚¹  â”‚  â”‚  è¡Œä¸º    â”‚      â”‚
â”‚  â”‚ æŸ±çŠ¶å›¾   â”‚  â”‚ æŸ±çŠ¶å›¾   â”‚  â”‚ æŸ±çŠ¶å›¾   â”‚  â”‚ æŸ±çŠ¶å›¾   â”‚      â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚      â”‚
â”‚  â”‚  (30+æ¡) â”‚  â”‚  (20+æ¡) â”‚  â”‚  (15+æ¡) â”‚  â”‚  (25+æ¡) â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å°ºå¯¸**:
- é«˜åº¦ï¼šçº¦500px
- å®½åº¦ï¼š100%ï¼ˆå“åº”å¼ï¼‰
- å•ä¸ªå›¾è¡¨å®½åº¦ï¼š25%ï¼ˆä¸€è¡Œ4ä¸ªï¼‰

---

## ğŸ“Š å›¾è¡¨é…ç½®

### EChartsé…ç½®ï¼ˆå †å æŸ±çŠ¶å›¾ï¼‰

```javascript
{
  title: {
    text: 'äººç¾¤ç‰¹å¾',
    textStyle: { fontSize: 14, fontWeight: 600 }
  },
  tooltip: {
    trigger: 'axis',
    axisPointer: { type: 'shadow' },
    formatter: function(params) {
      const keyword = params[0].name;
      const negative = params[0].value;
      const positive = params[1].value;
      const total = negative + positive;
      return `
        ${keyword}<br/>
        æ€»æåŠ: ${total}æ¬¡<br/>
        å¥½è¯„(4-5æ˜Ÿ): ${positive}æ¬¡ (${(positive/total*100).toFixed(1)}%)<br/>
        å·®è¯„(1-3æ˜Ÿ): ${negative}æ¬¡ (${(negative/total*100).toFixed(1)}%)
      `;
    }
  },
  xAxis: {
    type: 'category',
    data: ['son', 'daughter', 'husband', 'wife', 'granddaughter', ...],
    axisLabel: {
      interval: 0,  // æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾
      rotate: 45,   // æ—‹è½¬45åº¦é¿å…é‡å 
      fontSize: 11
    }
  },
  yAxis: {
    type: 'value',
    name: 'æåŠæ¬¡æ•°',
    nameTextStyle: { fontSize: 12 }
  },
  series: [
    {
      name: '1-3æ˜Ÿ',
      type: 'bar',
      stack: 'total',
      data: [47, 55, 36, 55, 6, ...],  // å·®è¯„æ¬¡æ•°
      itemStyle: { 
        color: '#EF4444',
        borderRadius: [0, 0, 4, 4]  // åº•éƒ¨åœ†è§’
      }
    },
    {
      name: '4-5æ˜Ÿ',
      type: 'bar',
      stack: 'total',
      data: [264, 249, 193, 148, 88, ...],  // å¥½è¯„æ¬¡æ•°
      itemStyle: { 
        color: '#10B981',
        borderRadius: [4, 4, 0, 0]  // é¡¶éƒ¨åœ†è§’
      }
    }
  ],
  grid: {
    left: '10%',
    right: '5%',
    bottom: '15%',
    top: '15%'
  }
}
```

---

## ğŸ“¥ ä¸‹è½½åŠŸèƒ½

### ä¸‹è½½èœå•

```html
<el-dropdown @command="handleDownload">
  <el-button size="small">
    ä¸‹è½½ <el-icon><ArrowDown /></el-icon>
  </el-button>
  <template #dropdown>
    <el-dropdown-menu>
      <el-dropdown-item command="xlsx">ğŸ“Š ä¸‹è½½æ¨¡å—æ•°æ®</el-dropdown-item>
      <el-dropdown-item command="png">ğŸ–¼ï¸ ä¸‹è½½å›¾ç‰‡</el-dropdown-item>
    </el-dropdown-menu>
  </template>
</el-dropdown>
```

### Excelå¯¼å‡ºæ ¼å¼

**æ–‡ä»¶å**: `æ¶ˆè´¹è€…ç”»åƒ-{äº§å“åç§°}-{æ—¥æœŸ}.xlsx`

**åŒ…å«4ä¸ªSheet**:

#### Sheet1: äººç¾¤ç‰¹å¾
| Keywords | Total mentions | 4~5 stars | 1~3 stars |
|----------|----------------|-----------|-----------|
| son | 311 | 264 | 47 |
| daughter | 304 | 249 | 55 |
| husband | 229 | 193 | 36 |
| ... | ... | ... | ... |

#### Sheet2: ä½¿ç”¨æ—¶åˆ»
| Keywords | Total mentions | 4~5 stars | 1~3 stars |
|----------|----------------|-----------|-----------|
| everyday | 329 | 300 | 29 |
| dinnertime | 100 | 88 | 12 |
| ... | ... | ... | ... |

#### Sheet3: ä½¿ç”¨åœ°ç‚¹
| Keywords | Total mentions | 4~5 stars | 1~3 stars |
|----------|----------------|-----------|-----------|
| gym | 176 | 156 | 20 |
| pocket | 50 | 45 | 5 |
| ... | ... | ... | ... |

#### Sheet4: è¡Œä¸º
| Keywords | Total mentions | 4~5 stars | 1~3 stars |
|----------|----------------|-----------|-----------|
| workout | 329 | 300 | 29 |
| gift-give | 200 | 180 | 20 |
| ... | ... | ... | ... |

### å›¾ç‰‡å¯¼å‡º

- æ ¼å¼ï¼šPNG
- å°ºå¯¸ï¼š1920x600px
- å†…å®¹ï¼š4ä¸ªå›¾è¡¨åˆæˆæˆªå›¾
- ä½¿ç”¨EChartsçš„`getDataURL()`æ–¹æ³•

---

## ğŸ”„ ç¿»è¯‘åŠŸèƒ½

### ç¿»è¯‘é€»è¾‘

```javascript
const [isTranslated, setIsTranslated] = useState(false);

const handleTranslate = () => {
  setIsTranslated(!isTranslated);
  // å›¾è¡¨Xè½´æ ‡ç­¾åˆ‡æ¢
  updateChartLabels(isTranslated ? translatedLabels : originalLabels);
};
```

**ç¿»è¯‘æ˜ å°„**:
```javascript
const translations = {
  'son': 'å„¿å­',
  'daughter': 'å¥³å„¿',
  'husband': 'ä¸ˆå¤«',
  'wife': 'å¦»å­',
  'everyday': 'æ¯æ—¥ä½¿ç”¨',
  'gym': 'å¥èº«æˆ¿',
  'workout': 'é”»ç‚¼',
  // ...
};
```

---

## ğŸ“Š æ•°æ®ç»“æ„

### APIå“åº”æ ¼å¼

```json
{
  "consumerProfile": {
    "persona": [
      {
        "keyword": "son",
        "keywordCn": "å„¿å­",
        "totalMentions": 311,
        "positiveCount": 264,
        "negativeCount": 47,
        "percentage": 0.0311
      },
      {
        "keyword": "daughter",
        "keywordCn": "å¥³å„¿",
        "totalMentions": 304,
        "positiveCount": 249,
        "negativeCount": 55,
        "percentage": 0.0304
      }
    ],
    "usageTime": [...],
    "usageLocation": [...],
    "behavior": [...]
  }
}
```

---

## ğŸ’» ç»„ä»¶å®ç°

### Vueç»„ä»¶ç»“æ„

```vue
<template>
  <div class="consumer-profile-module">
    <!-- æ ‡é¢˜æ  -->
    <div class="module-header">
      <div class="header-left">
        <span class="module-icon">ğŸ‘¥</span>
        <h3>æ¶ˆè´¹è€…ç”»åƒ</h3>
      </div>
      <div class="header-right">
        <el-button size="small" @click="handleTranslate">
          {{ isTranslated ? 'è¿˜åŸ' : 'ç¿»è¯‘' }}
        </el-button>
        <el-dropdown @command="handleDownload">
          <el-button size="small">
            ä¸‹è½½ <el-icon><ArrowDown /></el-icon>
          </el-button>
          <template #dropdown>
            <el-dropdown-menu>
              <el-dropdown-item command="xlsx">ğŸ“Š ä¸‹è½½æ¨¡å—æ•°æ®</el-dropdown-item>
              <el-dropdown-item command="png">ğŸ–¼ï¸ ä¸‹è½½å›¾ç‰‡</el-dropdown-item>
            </el-dropdown-menu>
          </template>
        </el-dropdown>
      </div>
    </div>

    <!-- è¯´æ˜æ–‡å­— -->
    <div class="module-description">
      åˆ†æè¯„è®ºä¸­æåŠçš„äººç¾¤ç‰¹å¾ï¼Œå¸®åŠ©ä½ å‘ç°æ½œåœ¨åˆä½œä¼™ä¼´å’Œå—ä¼—
    </div>

    <!-- 4ä¸ªå›¾è¡¨ -->
    <div class="charts-container">
      <div class="chart-item" ref="personaChart"></div>
      <div class="chart-item" ref="usageTimeChart"></div>
      <div class="chart-item" ref="usageLocationChart"></div>
      <div class="chart-item" ref="behaviorChart"></div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import * as echarts from 'echarts';
import * as XLSX from 'xlsx';

const isTranslated = ref(false);
const personaChart = ref(null);
// ... å…¶ä»–refs

onMounted(() => {
  initCharts();
});

function initCharts() {
  // åˆå§‹åŒ–4ä¸ªEChartså®ä¾‹
  const personaInstance = echarts.init(personaChart.value);
  personaInstance.setOption(getChartOption('persona', data.persona));
  // ...
}

function handleDownload(command) {
  if (command === 'xlsx') {
    exportToExcel();
  } else {
    exportToPNG();
  }
}

function exportToExcel() {
  const workbook = XLSX.utils.book_new();
  
  // Sheet1: äººç¾¤ç‰¹å¾
  const personaData = data.persona.map(item => ({
    'Keywords': item.keyword,
    'Total mentions': item.totalMentions,
    '4~5 stars': item.positiveCount,
    '1~3 stars': item.negativeCount
  }));
  const sheet1 = XLSX.utils.json_to_sheet(personaData);
  XLSX.utils.book_append_sheet(workbook, sheet1, 'äººç¾¤ç‰¹å¾');
  
  // ... æ·»åŠ å…¶ä»–3ä¸ªSheet
  
  XLSX.writeFile(workbook, `æ¶ˆè´¹è€…ç”»åƒ-${productName}-${date}.xlsx`);
}
</script>

<style scoped>
.charts-container {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
  padding: 20px;
}

.chart-item {
  width: 100%;
  height: 400px;
}
</style>
```

---

## ğŸ¯ äº¤äº’ç»†èŠ‚

1. **é¼ æ ‡æ‚¬åœ**: æ˜¾ç¤ºè¯¦ç»†æ•°æ®tooltip
2. **å›¾è¡¨ç¼©æ”¾**: è‡ªé€‚åº”å®¹å™¨å®½åº¦
3. **ç¿»è¯‘åˆ‡æ¢**: å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»
4. **ä¸‹è½½è¿›åº¦**: æ˜¾ç¤ºloadingçŠ¶æ€

---

## ğŸ“± å“åº”å¼è®¾è®¡

```css
@media (max-width: 1400px) {
  .charts-container {
    grid-template-columns: repeat(2, 1fr);
  }
  .chart-item {
    height: 350px;
  }
}

@media (max-width: 768px) {
  .charts-container {
    grid-template-columns: 1fr;
  }
  .chart-item {
    height: 300px;
  }
}
```

---

**æ–‡æ¡£ç»´æŠ¤äºº**: å³è´¸æŠ€æœ¯å›¢é˜Ÿ  
**ç»„ä»¶è·¯å¾„**: `src/components/ConsumerProfile.vue`

