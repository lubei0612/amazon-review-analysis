# Webç«¯æ¨¡å—è®¾è®¡ - æ˜Ÿçº§å½±å“åº¦

**æ¨¡å—åç§°**: æ˜Ÿçº§å½±å“åº¦  
**å›¾æ ‡**: â­  
**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-21

---

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

### åŠŸèƒ½è¯´æ˜
åˆ†æè¯¥å•†å“æ˜Ÿçº§çš„å½±å“åŸå› ï¼Œå¸®åŠ©ä½ èšç„¦é—®é¢˜å’Œæœºä¼šã€‚é€šè¿‡æ•£ç‚¹å›¾å¯è§†åŒ–å±•ç¤ºä¸åŒè¯é¢˜åœ¨æ˜Ÿçº§å’ŒæåŠç‡ä¸¤ä¸ªç»´åº¦çš„åˆ†å¸ƒã€‚

### æ•°æ®å±•ç¤º
- æ•£ç‚¹å›¾ï¼ˆScatter Chartï¼‰
- Xè½´ï¼šå¹³å‡æ˜Ÿçº§ï¼ˆ1.5æ˜Ÿ - 5æ˜Ÿï¼‰
- Yè½´ï¼šæåŠå æ¯”ï¼ˆ0% - 40%ï¼‰
- æ•°æ®ç‚¹å¤§å°ï¼šå›ºå®š
- é¢œè‰²åŒºåˆ†ï¼šçº¢è‰²ï¼ˆå·®è¯„ï¼‰ã€ç»¿è‰²ï¼ˆå¥½è¯„ï¼‰

---

## ğŸ¨ UIè®¾è®¡

### æ•´ä½“å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â­ æ˜Ÿçº§å½±å“åº¦                         ç¿»è¯‘  [ä¸‹è½½â–¼]            â”‚
â”‚  åˆ†æè¯¥å•†å“æ˜Ÿçº§çš„å½±å“åŸå› ï¼Œå¸®åŠ©ä½ èšç„¦é—®é¢˜å’Œæœºä¼š                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   37% â”‚                                    â— Great Sound Qualityâ”‚
â”‚       â”‚                                                         â”‚
â”‚       â”‚  â— Poor Sound Quality                                  â”‚
â”‚   17% â”‚       â— Uncomfortable                                  â”‚
â”‚       â”‚                                                         â”‚
â”‚       â”‚                              â— Good Value  â— High Qualityâ”‚
â”‚    7% â”‚                                   â— Good Fit            â”‚
â”‚       â”‚                                                         â”‚
â”‚    0% â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚      1.5æ˜Ÿ   2æ˜Ÿ    2.5æ˜Ÿ   3æ˜Ÿ    4æ˜Ÿ    4.5æ˜Ÿ    5æ˜Ÿ         â”‚
â”‚                                   â†‘                             â”‚
â”‚                              å‚è€ƒçº¿ï¼ˆ4æ˜Ÿï¼‰                       â”‚
â”‚                                                                 â”‚
â”‚  å›¾ä¾‹ï¼š                                                         â”‚
â”‚  â— ç»¿è‰²ï¼ˆæ˜Ÿçº§â‰¥4æ˜Ÿï¼‰- å¥½è¯„è¯é¢˜                                   â”‚
â”‚  â— çº¢è‰²ï¼ˆæ˜Ÿçº§<4æ˜Ÿï¼‰- å·®è¯„è¯é¢˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å°ºå¯¸**:
- é«˜åº¦ï¼š600px
- å®½åº¦ï¼š100%ï¼ˆå“åº”å¼ï¼‰

---

## ğŸ“Š EChartsé…ç½®

### æ•£ç‚¹å›¾é…ç½®

```javascript
{
  title: {
    text: '',  // æ ‡é¢˜åœ¨å¤–éƒ¨æ˜¾ç¤º
    left: 'center'
  },
  
  tooltip: {
    trigger: 'item',
    formatter: function(params) {
      const data = params.data;
      return `
        <strong>${data.topic}</strong><br/>
        å¹³å‡æ˜Ÿçº§: ${data.star.toFixed(2)}æ˜Ÿ<br/>
        æåŠå æ¯”: ${(data.percentage * 100).toFixed(2)}%<br/>
        æåŠæ¬¡æ•°: ${data.mentions}æ¬¡
      `;
    }
  },
  
  grid: {
    left: '10%',
    right: '10%',
    bottom: '15%',
    top: '10%',
    containLabel: true
  },
  
  xAxis: {
    type: 'value',
    name: 'å¹³å‡æ˜Ÿçº§',
    nameLocation: 'middle',
    nameGap: 30,
    min: 1.5,
    max: 5,
    interval: 0.5,
    axisLabel: {
      formatter: '{value}æ˜Ÿ'
    },
    splitLine: {
      show: true,
      lineStyle: {
        color: '#E5E7EB',
        type: 'dashed'
      }
    }
  },
  
  yAxis: {
    type: 'value',
    name: 'æåŠæ¬¡æ•°å æ¯”',
    nameLocation: 'middle',
    nameGap: 50,
    min: 0,
    max: function(value) {
      return Math.ceil(value.max * 1.1 * 100) / 100;  // åŠ¨æ€æœ€å¤§å€¼
    },
    axisLabel: {
      formatter: function(value) {
        return (value * 100).toFixed(0) + '%';
      }
    },
    splitLine: {
      show: true,
      lineStyle: {
        color: '#E5E7EB',
        type: 'dashed'
      }
    }
  },
  
  // 4æ˜Ÿå‚è€ƒçº¿
  markLine: {
    silent: true,
    symbol: 'none',
    data: [
      {
        xAxis: 4,
        lineStyle: {
          color: '#9CA3AF',
          width: 2,
          type: 'solid'
        },
        label: {
          formatter: '4æ˜Ÿåˆ†ç•Œçº¿',
          position: 'insideEndTop',
          color: '#6B7280'
        }
      }
    ]
  },
  
  series: [
    {
      name: 'å¥½è¯„è¯é¢˜',
      type: 'scatter',
      data: positiveData.map(item => ({
        value: [item.star, item.percentage],
        topic: item.topic,
        star: item.star,
        percentage: item.percentage,
        mentions: item.mentions
      })),
      symbolSize: 10,  // å›ºå®šå¤§å°
      itemStyle: {
        color: '#10B981',  // ç»¿è‰²
        opacity: 0.8,
        borderColor: '#059669',
        borderWidth: 2
      },
      label: {
        show: true,
        position: 'right',
        formatter: '{@[2]}',  // æ˜¾ç¤ºè¯é¢˜åç§°
        fontSize: 11,
        color: '#1F2937'
      },
      emphasis: {
        itemStyle: {
          color: '#34D399',
          borderColor: '#047857',
          borderWidth: 3
        },
        label: {
          fontSize: 12,
          fontWeight: 'bold'
        }
      }
    },
    {
      name: 'å·®è¯„è¯é¢˜',
      type: 'scatter',
      data: negativeData.map(item => ({
        value: [item.star, item.percentage],
        topic: item.topic,
        star: item.star,
        percentage: item.percentage,
        mentions: item.mentions
      })),
      symbolSize: 10,  // å›ºå®šå¤§å°
      itemStyle: {
        color: '#EF4444',  // çº¢è‰²
        opacity: 0.8,
        borderColor: '#DC2626',
        borderWidth: 2
      },
      label: {
        show: true,
        position: 'right',
        formatter: '{@[2]}',
        fontSize: 11,
        color: '#1F2937'
      },
      emphasis: {
        itemStyle: {
          color: '#F87171',
          borderColor: '#B91C1C',
          borderWidth: 3
        },
        label: {
          fontSize: 12,
          fontWeight: 'bold'
        }
      }
    }
  ],
  
  legend: {
    data: ['å¥½è¯„è¯é¢˜', 'å·®è¯„è¯é¢˜'],
    bottom: 10,
    left: 'center',
    textStyle: {
      fontSize: 13
    }
  }
}
```

---

## ğŸ¨ æ ·å¼é…ç½®

### CSSæ ·å¼

```css
/* æ¨¡å—å®¹å™¨ */
.star-impact-module {
  border: 1px solid #E5E7EB;
  border-radius: 8px;
  background: white;
  margin-bottom: 24px;
}

/* æ ‡é¢˜æ  */
.module-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid #E5E7EB;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.module-icon {
  font-size: 20px;
}

.module-title {
  font-size: 16px;
  font-weight: 600;
  color: #1F2937;
}

.header-right {
  display: flex;
  gap: 12px;
}

/* è¯´æ˜æ–‡å­— */
.module-description {
  padding: 8px 20px 12px;
  font-size: 13px;
  color: #6B7280;
  line-height: 1.5;
}

/* å›¾è¡¨å®¹å™¨ */
.chart-container {
  padding: 20px;
  height: 600px;
}

/* å›¾ä¾‹è¯´æ˜ */
.chart-legend {
  display: flex;
  justify-content: center;
  gap: 32px;
  padding: 12px 20px;
  border-top: 1px solid #F3F4F6;
  font-size: 13px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.legend-dot.positive {
  background: #10B981;
  border: 2px solid #059669;
}

.legend-dot.negative {
  background: #EF4444;
  border: 2px solid #DC2626;
}

.legend-text {
  color: #4B5563;
}
```

---

## ğŸ“¥ ä¸‹è½½åŠŸèƒ½

### ä¸‹è½½èœå•

```html
<el-dropdown @command="handleDownload">
  <el-button size="small">
    ä¸‹è½½ <el-icon><ArrowDown /></el-icon>
  </el-button>
  <template #dropdown>
    <el-dropdown-menu>
      <el-dropdown-item command="csv">ğŸ“Š ä¸‹è½½æ¨¡å—æ•°æ®</el-dropdown-item>
      <el-dropdown-item command="png">ğŸ–¼ï¸ ä¸‹è½½å›¾ç‰‡</el-dropdown-item>
    </el-dropdown-menu>
  </template>
</el-dropdown>
```

### CSVå¯¼å‡ºæ ¼å¼

**æ–‡ä»¶å**: `æ˜Ÿçº§å½±å“åº¦-{äº§å“åç§°}-{æ—¥æœŸ}.csv`

**CSVç»“æ„**:
```csv
Topic,Star,Percentage,Mentions
Great Sound Quality,4.4567,0.298294998,3709
Comfortable,4.4213,0.119108895,1481
Long Battery Life,4.4563,0.114363841,1422
Ease Of Use,4.4614,0.076162136,947
High Quality,4.6855,0.07085411,881
Good Value,4.1105,0.050908798,633
Poor Sound Quality,2.4546,0.166639858,2072
Uncomfortable,2.8661,0.117741676,1464
Short Battery Life,2.3556,0.091362393,1136
```

**å¯¼å‡ºå®ç°**:
```javascript
function exportToCSV() {
  const csvContent = [
    ['Topic', 'Star', 'Percentage', 'Mentions'],
    ...allData.map(item => [
      item.topic,
      item.star,
      item.percentage,
      item.mentions
    ])
  ].map(row => row.join(',')).join('\n');

  const blob = new Blob(['\uFEFF' + csvContent], { 
    type: 'text/csv;charset=utf-8;' 
  });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `æ˜Ÿçº§å½±å“åº¦-${productName}-${date}.csv`;
  link.click();
}
```

### å›¾ç‰‡å¯¼å‡º

```javascript
function exportToPNG() {
  const chartInstance = echarts.getInstanceByDom(chartRef.value);
  const base64 = chartInstance.getDataURL({
    type: 'png',
    pixelRatio: 2,  // é«˜æ¸…æˆªå›¾
    backgroundColor: '#ffffff'
  });
  
  const link = document.createElement('a');
  link.href = base64;
  link.download = `æ˜Ÿçº§å½±å“åº¦-${productName}-${date}.png`;
  link.click();
}
```

---

## ğŸ”„ äº¤äº’åŠŸèƒ½

### 1. ç¿»è¯‘åŠŸèƒ½

```javascript
const [isTranslated, setIsTranslated] = useState(false);

const handleTranslate = () => {
  const chartInstance = echarts.getInstanceByDom(chartRef.value);
  
  if (!isTranslated) {
    // ç¿»è¯‘è¯é¢˜åç§°
    const translatedData = data.map(item => ({
      ...item,
      displayTopic: topicTranslations[item.topic] || item.topic
    }));
    
    // æ›´æ–°å›¾è¡¨
    chartInstance.setOption({
      series: updateSeriesWithTranslation(translatedData)
    });
  } else {
    // æ¢å¤åŸæ–‡
    chartInstance.setOption({
      series: updateSeriesWithOriginal(data)
    });
  }
  
  setIsTranslated(!isTranslated);
};

// ç¿»è¯‘æ˜ å°„
const topicTranslations = {
  'Great Sound Quality': 'éŸ³è´¨å‡ºè‰²',
  'Comfortable': 'ä½©æˆ´èˆ’é€‚',
  'Long Battery Life': 'ç»­èˆªæ—¶é—´é•¿',
  'Poor Sound Quality': 'éŸ³è´¨å·®',
  'Uncomfortable': 'ä¸èˆ’é€‚',
  'Short Battery Life': 'ç»­èˆªçŸ­',
  'Good Value': 'æ€§ä»·æ¯”é«˜',
  'High Quality': 'é«˜è´¨é‡',
  'Ease Of Use': 'æ˜“äºä½¿ç”¨',
  // ...
};
```

### 2. é¼ æ ‡äº¤äº’

- **æ‚¬åœ**: é«˜äº®æ•°æ®ç‚¹ï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯tooltip
- **ç‚¹å‡»**: å¯è·³è½¬åˆ°è¯¥è¯é¢˜çš„è¯„è®ºè¯¦æƒ…ï¼ˆå¯é€‰ï¼‰

### 3. ç¼©æ”¾åŠŸèƒ½

```javascript
{
  toolbox: {
    feature: {
      dataZoom: {
        yAxisIndex: 'none'
      },
      restore: {},
      saveAsImage: {
        pixelRatio: 2
      }
    },
    right: 20,
    top: 20
  },
  dataZoom: [
    {
      type: 'inside',
      xAxisIndex: 0,
      filterMode: 'none'
    },
    {
      type: 'inside',
      yAxisIndex: 0,
      filterMode: 'none'
    }
  ]
}
```

---

## ğŸ“Š æ•°æ®ç»“æ„

### APIå“åº”æ ¼å¼

```json
{
  "starImpact": [
    {
      "topic": "Great Sound Quality",
      "topicCn": "éŸ³è´¨å‡ºè‰²",
      "star": 4.4567,
      "percentage": 0.298294998,
      "mentions": 3709
    },
    {
      "topic": "Poor Sound Quality",
      "topicCn": "éŸ³è´¨å·®",
      "star": 2.4546,
      "percentage": 0.166639858,
      "mentions": 2072
    }
  ]
}
```

### æ•°æ®å¤„ç†é€»è¾‘

```javascript
// æŒ‰æ˜Ÿçº§åˆ†ä¸ºå¥½è¯„å’Œå·®è¯„
function processData(data) {
  const positiveData = data.filter(item => item.star >= 4);
  const negativeData = data.filter(item => item.star < 4);
  
  return { positiveData, negativeData };
}

// æŒ‰æåŠå æ¯”æ’åºï¼ˆç”¨äºæ˜¾ç¤ºæ ‡ç­¾ï¼‰
function sortByPercentage(data) {
  return [...data].sort((a, b) => b.percentage - a.percentage);
}
```

---

## ğŸ’» Vueç»„ä»¶å®ç°

```vue
<template>
  <div class="star-impact-module">
    <!-- æ ‡é¢˜æ  -->
    <div class="module-header">
      <div class="header-left">
        <span class="module-icon">â­</span>
        <h3 class="module-title">æ˜Ÿçº§å½±å“åº¦</h3>
      </div>
      <div class="header-right">
        <el-button size="small" @click="handleTranslate">
          {{ isTranslated ? 'è¿˜åŸ' : 'ç¿»è¯‘' }}
        </el-button>
        <el-dropdown @command="handleDownload">
          <el-button size="small">
            ä¸‹è½½ <el-icon><ArrowDown /></el-icon>
          </el-button>
          <template #dropdown>
            <el-dropdown-menu>
              <el-dropdown-item command="csv">ğŸ“Š ä¸‹è½½æ¨¡å—æ•°æ®</el-dropdown-item>
              <el-dropdown-item command="png">ğŸ–¼ï¸ ä¸‹è½½å›¾ç‰‡</el-dropdown-item>
            </el-dropdown-menu>
          </template>
        </el-dropdown>
      </div>
    </div>

    <!-- è¯´æ˜æ–‡å­— -->
    <div class="module-description">
      åˆ†æè¯¥å•†å“æ˜Ÿçº§çš„å½±å“åŸå› ï¼Œå¸®åŠ©ä½ èšç„¦é—®é¢˜å’Œæœºä¼š
    </div>

    <!-- å›¾è¡¨å®¹å™¨ -->
    <div ref="chartRef" class="chart-container"></div>

    <!-- å›¾ä¾‹è¯´æ˜ -->
    <div class="chart-legend">
      <div class="legend-item">
        <div class="legend-dot positive"></div>
        <span class="legend-text">ç»¿è‰²ï¼ˆæ˜Ÿçº§â‰¥4æ˜Ÿï¼‰- å¥½è¯„è¯é¢˜</span>
      </div>
      <div class="legend-item">
        <div class="legend-dot negative"></div>
        <span class="legend-text">çº¢è‰²ï¼ˆæ˜Ÿçº§&lt;4æ˜Ÿï¼‰- å·®è¯„è¯é¢˜</span>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue';
import * as echarts from 'echarts';
import { ArrowDown } from '@element-plus/icons-vue';

const props = defineProps({
  data: {
    type: Array,
    required: true
  }
});

const chartRef = ref(null);
const isTranslated = ref(false);
let chartInstance = null;

onMounted(() => {
  initChart();
  window.addEventListener('resize', handleResize);
});

onUnmounted(() => {
  chartInstance?.dispose();
  window.removeEventListener('resize', handleResize);
});

function initChart() {
  chartInstance = echarts.init(chartRef.value);
  
  const { positiveData, negativeData } = processData(props.data);
  
  const option = {
    // ... EChartsé…ç½®ï¼ˆè§ä¸Šæ–¹ï¼‰
  };
  
  chartInstance.setOption(option);
}

function processData(data) {
  const positiveData = data.filter(item => item.star >= 4);
  const negativeData = data.filter(item => item.star < 4);
  return { positiveData, negativeData };
}

function handleResize() {
  chartInstance?.resize();
}

function handleTranslate() {
  isTranslated.value = !isTranslated.value;
  // æ›´æ–°å›¾è¡¨æ ‡ç­¾
  updateChartLabels();
}

function handleDownload(command) {
  if (command === 'csv') {
    exportToCSV();
  } else {
    exportToPNG();
  }
}

function exportToCSV() {
  // CSVå¯¼å‡ºé€»è¾‘
}

function exportToPNG() {
  // PNGå¯¼å‡ºé€»è¾‘
}
</script>

<style scoped>
/* CSSæ ·å¼è§ä¸Šæ–¹ */
</style>
```

---

## ğŸ¯ æ•°æ®åˆ†ææŒ‡å¯¼

### å››è±¡é™åˆ†æ

æ ¹æ®æ•£ç‚¹å›¾ä½ç½®ï¼Œå¯ä»¥åˆ†ä¸º4ä¸ªè±¡é™ï¼š

```
        é«˜æåŠç‡
           â†‘
    éœ€æ”¹è¿›  â”‚  æ ¸å¿ƒå–ç‚¹
    (å·¦ä¸Š)  â”‚  (å³ä¸Š)
           â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ é«˜æ˜Ÿçº§
           â”‚
    æ¬¡è¦é—®é¢˜â”‚  æ½œåœ¨äº®ç‚¹
    (å·¦ä¸‹)  â”‚  (å³ä¸‹)
           â”‚
        ä½æåŠç‡
```

**ç­–ç•¥å»ºè®®**:
1. **å³ä¸Šè§’ï¼ˆæ ¸å¿ƒå–ç‚¹ï¼‰**: ç»§ç»­å¼ºåŒ–ï¼Œä½œä¸ºä¸»è¦è¥é”€ç‚¹
2. **å·¦ä¸Šè§’ï¼ˆéœ€æ”¹è¿›ï¼‰**: ä¼˜å…ˆè§£å†³ï¼Œå½±å“å¤§é‡ç”¨æˆ·
3. **å³ä¸‹è§’ï¼ˆæ½œåœ¨äº®ç‚¹ï¼‰**: è€ƒè™‘åŠ å¤§å®£ä¼ 
4. **å·¦ä¸‹è§’ï¼ˆæ¬¡è¦é—®é¢˜ï¼‰**: ä½ä¼˜å…ˆçº§

---

## ğŸ“± å“åº”å¼è®¾è®¡

```css
@media (max-width: 1200px) {
  .chart-container {
    height: 500px;
  }
}

@media (max-width: 768px) {
  .chart-container {
    height: 400px;
  }
  
  .chart-legend {
    flex-direction: column;
    gap: 12px;
  }
}
```

---

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®ç‚¹è¿‡å¤šæ—¶**ï¼ˆ>50ä¸ªï¼‰:
```javascript
// åªæ˜¾ç¤ºå‰30ä¸ªé‡è¦è¯é¢˜
const topTopics = data
  .sort((a, b) => b.percentage - a.percentage)
  .slice(0, 30);
```

2. **æ ‡ç­¾é˜²é‡å **:
```javascript
{
  label: {
    show: true,
    position: 'right',
    overflow: 'truncate',
    width: 100
  }
}
```

---

**æ–‡æ¡£ç»´æŠ¤äºº**: å³è´¸æŠ€æœ¯å›¢é˜Ÿ  
**ç»„ä»¶è·¯å¾„**: `src/components/StarImpact.vue`

