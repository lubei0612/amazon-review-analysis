# ğŸ¤– AIå¼€å‘åä½œè§„èŒƒ

> **ç‰ˆæœ¬**: v1.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-11-07  
> **é€‚ç”¨äº**: æ‰€æœ‰AIåŠ©æ‰‹ï¼ˆClaude, ChatGPT, Copilotç­‰ï¼‰

---

## ğŸ“Œ å¿…è¯»ï¼šå¼€å§‹å·¥ä½œå‰

**æ¯æ¬¡å¼€å§‹æ–°ä»»åŠ¡æ—¶ï¼Œè¯·æŒ‰é¡ºåºæ‰§è¡Œï¼š**

1. âœ… **é˜…è¯»æœ¬æ–‡æ¡£** ï¼ˆ5åˆ†é’Ÿï¼‰
2. âœ… **é˜…è¯» `README.md` çš„AIå¼€å‘åä½œæŒ‡å—ç« èŠ‚** ï¼ˆ3åˆ†é’Ÿï¼‰
3. âœ… **æŸ¥çœ‹ç›¸å…³çš„docsæ–‡æ¡£** ï¼ˆ10åˆ†é’Ÿï¼‰
4. âœ… **ç†è§£å½“å‰ä»»åŠ¡çš„ä¸Šä¸‹æ–‡** ï¼ˆ5åˆ†é’Ÿï¼‰
5. âœ… **æ€è€ƒæœ€ä¼˜å®ç°æ–¹æ¡ˆ** ï¼ˆ10åˆ†é’Ÿï¼‰
6. âœ… **å¼€å§‹ç¼–ç **

**ç›®çš„**ï¼šç¡®ä¿ä»£ç è´¨é‡ã€ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§

---

## ğŸ¯ é¡¹ç›®æ ¸å¿ƒç†è§£ï¼ˆå¿…é¡»æŒæ¡ï¼‰

### é¡¹ç›®å®šä½
**Amazonè¯„è®ºæ™ºèƒ½åˆ†æç³»ç»Ÿ**

**ä¸€å¥è¯æè¿°**ï¼š  
å¸®åŠ©Amazonå–å®¶ä»å‡ åƒæ¡è¯„è®ºä¸­ï¼Œé€šè¿‡AIåœ¨1åˆ†é’Ÿå†…æç‚¼å‡º7ä¸ªç»´åº¦çš„æ·±åº¦æ¶ˆè´¹è€…æ´å¯Ÿã€‚

### æ ¸å¿ƒä»·å€¼é“¾
```
ç”¨æˆ·ç—›ç‚¹ï¼šåˆ†æè¯„è®ºå¤ªè€—æ—¶ï¼ˆ1å‘¨+ï¼‰
      â†“
è§£å†³æ–¹æ¡ˆï¼šAIè‡ªåŠ¨åˆ†æï¼ˆ1åˆ†é’Ÿï¼‰
      â†“
ç”¨æˆ·ä»·å€¼ï¼šå¿«é€Ÿå†³ç­–ï¼Œä¼˜åŒ–äº§å“
```

### æŠ€æœ¯æ¶æ„ï¼ˆç®€åŒ–ç‰ˆï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ç•Œé¢    â”‚ â† Chromeæ‰©å±• / Webç«¯
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  åç«¯API    â”‚ â† Express.js (Node.js)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â–¼â”€â”€â”
â”‚çˆ¬è™« â”‚ â”‚ AI  â”‚ â† Apify + Gemini 2.5 Pro
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ
```
1. ç”¨æˆ·è¾“å…¥ASIN
2. Apifyçˆ¬å–è¯„è®ºï¼ˆ2000+æ¡ï¼‰
3. Geminiå¹¶å‘åˆ†æ7ç»´åº¦
4. è¿”å›ç»“æ„åŒ–æŠ¥å‘Š
5. å‰ç«¯å¯è§†åŒ–å±•ç¤º
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡åŸåˆ™

### 1. KISSåŸåˆ™ï¼ˆKeep It Simple, Stupidï¼‰
**æ ¸å¿ƒæ€æƒ³**ï¼šç®€å•ä¼˜äºå¤æ‚

**ç¤ºä¾‹1ï¼šçˆ¬è™«æ¶æ„æ¼”å˜**
```javascript
// âŒ è¿‡åº¦è®¾è®¡ï¼ˆä¹‹å‰çš„ç‰ˆæœ¬ï¼‰
class CrawlerFacade {
  constructor() {
    this.apify = new Apify()
    this.outscraper = new Outscraper()
    this.rapidapi = new RapidAPI()
    this.puppeteer = new Puppeteer()
    // 4å±‚é™çº§é€»è¾‘ = 334è¡Œä»£ç 
  }
}

// âœ… ç®€åŒ–åï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
class CrawlerFacade {
  constructor() {
    this.apify = new Apify()
    // å•ä¸€çˆ¬è™« = 171è¡Œä»£ç 
  }
}
```

**ä¸ºä»€ä¹ˆï¼Ÿ**
- ApifyæˆåŠŸç‡99%+ï¼Œå…¶ä»–çˆ¬è™«ä¸ç¨³å®š
- é™çº§é€»è¾‘å¢åŠ å¤æ‚åº¦ï¼Œé™ä½å¯ç»´æŠ¤æ€§
- ç»“æœï¼šä»£ç å‡å°‘48%ï¼Œç¨³å®šæ€§æå‡

### 2. æœ€ä¼˜ç®—æ³•ä¼˜å…ˆ
**æ ¸å¿ƒæ€æƒ³**ï¼šæ€§èƒ½å’Œå¯è¯»æ€§çš„å¹³è¡¡

**ç¤ºä¾‹2ï¼šè¯„è®ºå»é‡**
```javascript
// âŒ O(nÂ²) - åµŒå¥—å¾ªç¯
function removeDuplicates(reviews) {
  const result = []
  for (let i = 0; i < reviews.length; i++) {
    let isDuplicate = false
    for (let j = 0; j < result.length; j++) {
      if (reviews[i].id === result[j].id) {
        isDuplicate = true
        break
      }
    }
    if (!isDuplicate) result.push(reviews[i])
  }
  return result
}

// âœ… O(n) - ä½¿ç”¨Set
function removeDuplicates(reviews) {
  const seen = new Set()
  return reviews.filter(review => {
    if (seen.has(review.id)) return false
    seen.add(review.id)
    return true
  })
}
```

### 3. DRYåŸåˆ™ï¼ˆDon't Repeat Yourselfï¼‰
**æ ¸å¿ƒæ€æƒ³**ï¼šé¿å…é‡å¤ä»£ç 

**ç¤ºä¾‹3ï¼šåˆ†ææœåŠ¡**
```javascript
// âŒ é‡å¤ä»£ç 
async function analyzeConsumerProfile(reviews) {
  try {
    const prompt = getPrompt(reviews)
    const result = await gemini.analyze(prompt)
    return parseResult(result)
  } catch (error) {
    logger.error('åˆ†æå¤±è´¥', error)
    throw error
  }
}

async function analyzeUsageScenarios(reviews) {
  try {
    const prompt = getPrompt(reviews)
    const result = await gemini.analyze(prompt)
    return parseResult(result)
  } catch (error) {
    logger.error('åˆ†æå¤±è´¥', error)
    throw error
  }
}

// âœ… æå–å…¬å…±é€»è¾‘
async function analyzeWithTemplate(reviews, promptGetter, parser) {
  try {
    const prompt = promptGetter(reviews)
    const result = await gemini.analyze(prompt)
    return parser(result)
  } catch (error) {
    logger.error('åˆ†æå¤±è´¥', error)
    throw error
  }
}
```

---

## ğŸ“‹ å¼€å‘æµç¨‹ï¼ˆæ ‡å‡†åŒ–ï¼‰

### é˜¶æ®µ1ï¼šç†è§£éœ€æ±‚ï¼ˆ20%æ—¶é—´ï¼‰
```
1. æ˜ç¡®éœ€æ±‚çš„æ ¸å¿ƒç›®æ ‡
   - ç”¨æˆ·æƒ³è¦ä»€ä¹ˆï¼Ÿ
   - è§£å†³ä»€ä¹ˆç—›ç‚¹ï¼Ÿ
   
2. è¯„ä¼°å½±å“èŒƒå›´
   - æ¶‰åŠå“ªäº›æ¨¡å—ï¼Ÿ
   - æ˜¯å¦å½±å“APIæ¥å£ï¼Ÿ
   - æ˜¯å¦éœ€è¦æ•°æ®åº“å˜æ›´ï¼Ÿ
   
3. è®¾è®¡åˆæ­¥æ–¹æ¡ˆ
   - æœ€ç®€å•çš„å®ç°æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ
   - æ˜¯å¦æœ‰ç°æˆä»£ç å¯å¤ç”¨ï¼Ÿ
   - é¢„ä¼°å¼€å‘æ—¶é—´
```

### é˜¶æ®µ2ï¼šç¼–ç å®ç°ï¼ˆ50%æ—¶é—´ï¼‰
```
1. æ–‡ä»¶ç»„ç»‡
   - æ–°åŠŸèƒ½æ”¾åœ¨åˆé€‚çš„ç›®å½•
   - éµå¾ªç°æœ‰æ–‡ä»¶ç»“æ„
   
2. ç¼–ç è§„èŒƒ
   - å‘½åæ¸…æ™°
   - é€»è¾‘ç®€æ´
   - é€‚å½“æ³¨é‡Š
   
3. é”™è¯¯å¤„ç†
   - æ•è·æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸
   - æä¾›å‹å¥½çš„é”™è¯¯ä¿¡æ¯
   - è®°å½•è¯¦ç»†æ—¥å¿—
```

### é˜¶æ®µ3ï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ20%æ—¶é—´ï¼‰
```
1. åŠŸèƒ½æµ‹è¯•
   - æ­£å¸¸æƒ…å†µ
   - è¾¹ç•Œæƒ…å†µ
   - å¼‚å¸¸æƒ…å†µ
   
2. æ€§èƒ½æ£€æŸ¥
   - æ˜¯å¦æœ‰æ€§èƒ½ç“¶é¢ˆï¼Ÿ
   - æ•°æ®åº“æŸ¥è¯¢æ˜¯å¦ä¼˜åŒ–ï¼Ÿ
   - APIå“åº”æ—¶é—´æ˜¯å¦åˆç†ï¼Ÿ
   
3. ä»£ç å®¡æŸ¥ï¼ˆè‡ªæŸ¥ï¼‰
   - ä½¿ç”¨æœ¬æ–‡æ¡£çš„æ£€æŸ¥æ¸…å•
```

### é˜¶æ®µ4ï¼šæ–‡æ¡£å’Œæäº¤ï¼ˆ10%æ—¶é—´ï¼‰
```
1. æ›´æ–°ç›¸å…³æ–‡æ¡£
   - READMEï¼ˆå¦‚æœ‰å¿…è¦ï¼‰
   - APIæ–‡æ¡£ï¼ˆå¦‚æœ‰å˜æ›´ï¼‰
   - ç”¨æˆ·æŒ‡å—ï¼ˆå¦‚æœ‰æ–°åŠŸèƒ½ï¼‰
   
2. ç¼–å†™æ¸…æ™°çš„commit message
   - ä½¿ç”¨è§„èŒƒæ ¼å¼
   - è¯´æ˜ä¿®æ”¹å†…å®¹å’ŒåŸå› 
   
3. åˆ›å»ºæ€»ç»“æ–‡æ¡£ï¼ˆé‡å¤§æ”¹åŠ¨ï¼‰
   - æ”¾åœ¨docs/ç›®å½•
   - è®°å½•è®¾è®¡æ€è·¯å’Œæ³¨æ„äº‹é¡¹
```

---

## ğŸ” ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•ï¼ˆè¯¦ç»†ç‰ˆï¼‰

### åŠŸèƒ½æ€§æ£€æŸ¥
```
â–¡ åŠŸèƒ½æ˜¯å¦å®Œå…¨ç¬¦åˆéœ€æ±‚ï¼Ÿ
â–¡ æ˜¯å¦å¤„ç†äº†æ‰€æœ‰è¾¹ç•Œæƒ…å†µï¼Ÿ
  - ç©ºæ•°æ®
  - è¶…å¤§æ•°æ®
  - ç‰¹æ®Šå­—ç¬¦
  - ç½‘ç»œé”™è¯¯
  - APIå¤±è´¥
â–¡ é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„ï¼Ÿ
  - try-catchè¦†ç›–
  - é”™è¯¯ä¿¡æ¯æ¸…æ™°
  - ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯
â–¡ æ—¥å¿—æ˜¯å¦å……åˆ†ï¼Ÿ
  - å…³é”®æ­¥éª¤æœ‰æ—¥å¿—
  - æ—¥å¿—å±‚çº§æ­£ç¡®
  - åŒ…å«å¿…è¦ä¸Šä¸‹æ–‡
```

### æ€§èƒ½æ£€æŸ¥
```
â–¡ ç®—æ³•æ—¶é—´å¤æ‚åº¦æ˜¯å¦æœ€ä¼˜ï¼Ÿ
  - é¿å…O(nÂ²)ä»¥ä¸Š
  - ä½¿ç”¨Map/SetåŠ é€ŸæŸ¥æ‰¾
â–¡ æ˜¯å¦æœ‰ä¸å¿…è¦çš„é‡å¤è®¡ç®—ï¼Ÿ
  - ç¼“å­˜è®¡ç®—ç»“æœ
  - å¤ç”¨å·²æœ‰æ•°æ®
â–¡ æ•°æ®åº“æŸ¥è¯¢æ˜¯å¦ä¼˜åŒ–ï¼Ÿ
  - ä½¿ç”¨ç´¢å¼•
  - é¿å…N+1æŸ¥è¯¢
  - æ‰¹é‡æ“ä½œ
â–¡ APIè°ƒç”¨æ˜¯å¦æ§åˆ¶é¢‘ç‡ï¼Ÿ
  - é˜²æ­¢è¶…å‡ºé…é¢
  - å®ç°é‡è¯•æœºåˆ¶
  - æ·»åŠ è¶…æ—¶æ§åˆ¶
```

### ä»£ç è´¨é‡æ£€æŸ¥
```
â–¡ ä»£ç æ˜¯å¦ç®€æ´æ˜“è¯»ï¼Ÿ
  - å•ä¸ªå‡½æ•°<50è¡Œ
  - é€»è¾‘æ¸…æ™°
  - æ— åµŒå¥—è¿‡æ·±ï¼ˆ<3å±‚ï¼‰
â–¡ å‘½åæ˜¯å¦æ¸…æ™°ï¼Ÿ
  - å˜é‡åæœ‰æ„ä¹‰
  - å‡½æ•°ååŠ¨è¯å¼€å¤´
  - ç±»ååè¯å¼€å¤´
â–¡ æ˜¯å¦æœ‰é‡å¤ä»£ç ï¼Ÿ
  - ç›¸ä¼¼é€»è¾‘æå–å‡½æ•°
  - ä½¿ç”¨é…ç½®é©±åŠ¨
â–¡ æ³¨é‡Šæ˜¯å¦å¿…è¦ä¸”å……åˆ†ï¼Ÿ
  - å¤æ‚é€»è¾‘æœ‰æ³¨é‡Š
  - é¿å…æ— ç”¨æ³¨é‡Š
  - å…¬å¼€APIæœ‰æ–‡æ¡£æ³¨é‡Š
```

### ä¸€è‡´æ€§æ£€æŸ¥
```
â–¡ æ˜¯å¦éµå¾ªé¡¹ç›®ä»£ç é£æ ¼ï¼Ÿ
  - ç¼©è¿›ï¼ˆ2ç©ºæ ¼ï¼‰
  - å¼•å·ï¼ˆå•å¼•å·ï¼‰
  - åˆ†å·ï¼ˆå¿…é¡»ï¼‰
â–¡ æ–‡ä»¶ç»„ç»‡æ˜¯å¦åˆç†ï¼Ÿ
  - æ”¾åœ¨æ­£ç¡®ç›®å½•
  - å‘½åç¬¦åˆè§„èŒƒ
â–¡ æ˜¯å¦æ›´æ–°äº†ç›¸å…³æ–‡æ¡£ï¼Ÿ
  - README
  - APIæ–‡æ¡£
  - æ³¨é‡Š
```

### å®‰å…¨æ€§æ£€æŸ¥
```
â–¡ æ˜¯å¦æœ‰SQLæ³¨å…¥é£é™©ï¼Ÿ
â–¡ æ˜¯å¦æœ‰XSSé£é™©ï¼Ÿ
â–¡ æ•æ„Ÿä¿¡æ¯æ˜¯å¦ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Ÿ
â–¡ ç”¨æˆ·è¾“å…¥æ˜¯å¦éªŒè¯ï¼Ÿ
â–¡ APIæ˜¯å¦æœ‰æƒé™æ§åˆ¶ï¼Ÿ
```

---

## ğŸ“š ç¼–ç è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

### å‘½åè§„èŒƒ

#### å˜é‡å’Œå‡½æ•°
```javascript
// âœ… é©¼å³°å‘½åï¼Œå«ä¹‰æ¸…æ™°
const reviewCount = 100
const userProfile = { name: 'John' }
async function getReviewsByAsin(asin) { }
function calculateAverageRating(reviews) { }

// âŒ é¿å…
const rc = 100  // å¤ªç®€çŸ­
const data = {}  // å¤ªæ¨¡ç³Š
async function get(id) { }  // ä¸æ¸…æ¥šè·å–ä»€ä¹ˆ
function calc(arr) { }  // ç¼©å†™ä¸æ˜ç¡®
```

#### ç±»å’Œæ„é€ å‡½æ•°
```javascript
// âœ… å¸•æ–¯å¡å‘½å
class ApifyAmazonCrawler { }
class TaskService { }
class GeminiProvider { }

// âŒ é¿å…
class crawler { }  // å°å†™å¼€å¤´
class apify_crawler { }  // ä¸‹åˆ’çº¿
```

#### å¸¸é‡
```javascript
// âœ… å…¨å¤§å†™+ä¸‹åˆ’çº¿
const MAX_REVIEWS = 2000
const API_TIMEOUT = 30000
const DEFAULT_LANGUAGE = 'en'

// âŒ é¿å…
const maxReviews = 2000  // çœ‹èµ·æ¥åƒå˜é‡
```

#### æ–‡ä»¶å
```javascript
// âœ… å¸•æ–¯å¡å‘½åï¼ˆç±»ï¼‰æˆ–é©¼å³°å‘½åï¼ˆå·¥å…·ï¼‰
ApifyAmazonCrawler.js
TaskService.js
logger.js
dataHelper.js

// âŒ é¿å…
apify-amazon-crawler.js  // çŸ­æ¨ªçº¿
task_service.js  // ä¸‹åˆ’çº¿
```

### ä»£ç ç»“æ„

#### æ¨¡å—å¯¼å…¥é¡ºåº
```javascript
// 1. Node.jså†…ç½®æ¨¡å—
const fs = require('fs')
const path = require('path')

// 2. ç¬¬ä¸‰æ–¹ä¾èµ–
const axios = require('axios')
const express = require('express')

// 3. é¡¹ç›®å†…éƒ¨æ¨¡å—
const logger = require('../utils/logger')
const config = require('../config')

// 4. ç›¸å¯¹è·¯å¾„æ¨¡å—
const TaskService = require('./TaskService')
```

#### å‡½æ•°ç»„ç»‡
```javascript
class ExampleService {
  // 1. æ„é€ å‡½æ•°
  constructor() { }
  
  // 2. å…¬å¼€æ–¹æ³•ï¼ˆæŒ‰é‡è¦æ€§æ’åºï¼‰
  async mainMethod() { }
  async secondaryMethod() { }
  
  // 3. ç§æœ‰æ–¹æ³•ï¼ˆä¸‹åˆ’çº¿å¼€å¤´ï¼‰
  async _helperMethod() { }
  _validateData(data) { }
  
  // 4. é™æ€æ–¹æ³•
  static utilityMethod() { }
}
```

### é”™è¯¯å¤„ç†è§„èŒƒ

```javascript
// âœ… æ¨èçš„é”™è¯¯å¤„ç†
async function processTask(taskId) {
  try {
    // 1. å‚æ•°éªŒè¯
    if (!taskId) {
      throw new Error('taskIdä¸èƒ½ä¸ºç©º')
    }
    
    // 2. ä¸šåŠ¡é€»è¾‘
    const task = await getTask(taskId)
    if (!task) {
      throw new Error(`ä»»åŠ¡ä¸å­˜åœ¨: ${taskId}`)
    }
    
    const result = await executeTask(task)
    
    // 3. è®°å½•æˆåŠŸæ—¥å¿—
    logger.info('ä»»åŠ¡å®Œæˆ', { taskId, result })
    
    return result
    
  } catch (error) {
    // 4. è¯¦ç»†é”™è¯¯æ—¥å¿—
    logger.error('ä»»åŠ¡å¤„ç†å¤±è´¥', {
      taskId,
      error: error.message,
      stack: error.stack
    })
    
    // 5. æŠ›å‡ºå‹å¥½é”™è¯¯
    throw new Error(`ä»»åŠ¡å¤„ç†å¤±è´¥: ${error.message}`)
  }
}

// âŒ ä¸æ¨è
async function processTask(taskId) {
  try {
    return await getTask(taskId)
  } catch (e) {
    console.log(e)  // ä¸å¥½çš„æ—¥å¿—
    return null  // åæ‰é”™è¯¯
  }
}
```

### æ—¥å¿—è§„èŒƒ

```javascript
// âœ… ç»“æ„åŒ–æ—¥å¿—
logger.info('ä»»åŠ¡å¼€å§‹', {
  taskId: 'task-123',
  asin: 'B08N5WRWNW',
  maxReviews: 500
})

logger.error('APIè°ƒç”¨å¤±è´¥', {
  api: 'Apify',
  asin: 'B08N5WRWNW',
  error: error.message,
  retryCount: 3
})

// âŒ é¿å…
console.log('start')
logger.info('error: ' + error)
logger.error(JSON.stringify(data))
```

---

## ğŸ¯ å¸¸è§å¼€å‘åœºæ™¯ï¼ˆè¯¦ç»†ç¤ºä¾‹ï¼‰

### åœºæ™¯1: æ·»åŠ æ–°çš„AIåˆ†æç»´åº¦

**éœ€æ±‚**ï¼šæ·»åŠ "æƒ…æ„Ÿè¶‹åŠ¿åˆ†æ"ç»´åº¦

**æ­¥éª¤**ï¼š

#### 1. è®¾è®¡Promptï¼ˆsrc/ai/PromptTemplates.jsï¼‰
```javascript
/**
 * æƒ…æ„Ÿè¶‹åŠ¿åˆ†æPrompt
 * åˆ†æè¯„è®ºçš„æƒ…æ„Ÿå˜åŒ–è¶‹åŠ¿
 */
static getSentimentTrendPrompt(reviews) {
  // æŒ‰æ—¶é—´æ’åºè¯„è®º
  const sortedReviews = reviews
    .sort((a, b) => new Date(a.date) - new Date(b.date))
    .slice(0, 200)  // æœ€å¤š200æ¡
  
  const reviewText = sortedReviews
    .map(r => `[${r.date}] ${r.rating}æ˜Ÿ: ${r.text}`)
    .join('\n\n')
  
  return `
åˆ†æä»¥ä¸‹Amazonè¯„è®ºçš„æƒ…æ„Ÿè¶‹åŠ¿ï¼š

${reviewText}

è¯·æä¾›JSONæ ¼å¼çš„åˆ†æç»“æœï¼š
{
  "overallTrend": "ä¸Šå‡/ä¸‹é™/ç¨³å®š",
  "monthlyData": [
    {
      "month": "2023-01",
      "averageRating": 4.2,
      "sentiment": "ç§¯æ/ä¸­ç«‹/æ¶ˆæ",
      "keyTopics": ["topic1", "topic2"]
    }
  ],
  "insights": "è¶‹åŠ¿åˆ†ææ´å¯Ÿ..."
}
`
}
```

#### 2. æ·»åŠ åˆ†ææ–¹æ³•ï¼ˆsrc/ai/AnalysisService.jsï¼‰
```javascript
/**
 * åˆ†ææƒ…æ„Ÿè¶‹åŠ¿
 */
async analyzeSentimentTrend(reviews, systemPrompt) {
  try {
    logger.info('ğŸ” å¼€å§‹åˆ†ææƒ…æ„Ÿè¶‹åŠ¿', { count: reviews.length })
    
    const prompt = PromptTemplates.getSentimentTrendPrompt(reviews)
    const result = await this.gemini.analyze(prompt, systemPrompt)
    
    // éªŒè¯ç»“æœ
    if (!result.overallTrend) {
      throw new Error('æƒ…æ„Ÿè¶‹åŠ¿æ•°æ®ç¼ºå¤±')
    }
    
    logger.info('âœ… æƒ…æ„Ÿè¶‹åŠ¿åˆ†æå®Œæˆ')
    return result
    
  } catch (error) {
    logger.error('âŒ æƒ…æ„Ÿè¶‹åŠ¿åˆ†æå¤±è´¥', { error: error.message })
    throw error
  }
}
```

#### 3. é›†æˆåˆ°ä¸»åˆ†ææµç¨‹ï¼ˆsrc/ai/AnalysisService.jsï¼‰
```javascript
async analyze(reviews, options = {}) {
  // ... ç°æœ‰ä»£ç 
  
  // æ·»åŠ æƒ…æ„Ÿè¶‹åŠ¿åˆ†æ
  const results = await Promise.allSettled([
    this.analyzeConsumerProfile(reviews, systemPrompt),
    this.analyzeUsageScenarios(reviews, systemPrompt),
    this.analyzeStarRatingImpact(reviews, systemPrompt),
    this.analyzeProductExperience(reviews, systemPrompt),
    this.analyzePurchaseMotivation(reviews, systemPrompt),
    this.analyzeUnmetNeeds(reviews, systemPrompt),
    this.analyzeSentimentTrend(reviews, systemPrompt)  // âœ… æ–°å¢
  ])
  
  // å¤„ç†ç»“æœ
  return {
    // ... ç°æœ‰ç»´åº¦
    sentimentTrend: results[6].status === 'fulfilled' 
      ? results[6].value 
      : null
  }
}
```

#### 4. æ›´æ–°APIè¿”å›æ ¼å¼ï¼ˆæ–‡æ¡£ï¼‰
æ›´æ–° `docs/03-åç«¯APIè®¾è®¡æ–‡æ¡£.md`

#### 5. å‰ç«¯é€‚é…ï¼ˆå¦‚éœ€è¦ï¼‰
åœ¨ `web/src/components/` åˆ›å»º `SentimentTrend.vue`

---

### åœºæ™¯2: ä¼˜åŒ–APIæ€§èƒ½

**é—®é¢˜**ï¼šAIåˆ†ææ¥å£å“åº”æ—¶é—´è¿‡é•¿ï¼ˆ>2åˆ†é’Ÿï¼‰

**ä¼˜åŒ–æ­¥éª¤**ï¼š

#### 1. æ€§èƒ½åˆ†æ
```javascript
// æ·»åŠ æ€§èƒ½ç›‘æ§
async function analyzeWithTiming(reviews) {
  const startTime = Date.now()
  
  logger.info('â±ï¸ å¼€å§‹æ€§èƒ½ç›‘æ§')
  
  // çˆ¬å–
  const t1 = Date.now()
  const reviews = await crawler.getReviews(asin)
  logger.info(`çˆ¬å–è€—æ—¶: ${Date.now() - t1}ms`)
  
  // AIåˆ†æ
  const t2 = Date.now()
  const analysis = await analyzer.analyze(reviews)
  logger.info(`AIåˆ†æè€—æ—¶: ${Date.now() - t2}ms`)
  
  logger.info(`æ€»è€—æ—¶: ${Date.now() - startTime}ms`)
  
  return { reviews, analysis }
}
```

#### 2. è¯†åˆ«ç“¶é¢ˆ
```
å‘ç°é—®é¢˜ï¼š
- çˆ¬å–: 30ç§’ âœ…
- AIåˆ†æ: 90ç§’ âŒ (å¤ªæ…¢)
  - 7ä¸ªç»´åº¦ä¸²è¡Œæ‰§è¡Œ
```

#### 3. ä¼˜åŒ–æ–¹æ¡ˆ
```javascript
// âŒ ä¸²è¡Œæ‰§è¡Œï¼ˆæ…¢ï¼‰
const consumerProfile = await analyzeConsumerProfile(reviews)
const usageScenarios = await analyzeUsageScenarios(reviews)
const starRating = await analyzeStarRatingImpact(reviews)
// ... æ€»è®¡90ç§’

// âœ… å¹¶å‘æ‰§è¡Œï¼ˆå¿«ï¼‰
const results = await Promise.allSettled([
  analyzeConsumerProfile(reviews),
  analyzeUsageScenarios(reviews),
  analyzeStarRatingImpact(reviews),
  // ...
])
// æ€»è®¡15ç§’ï¼ˆæœ€æ…¢çš„ç»´åº¦ï¼‰

// æ€§èƒ½æå‡ï¼š6å€
```

#### 4. è¿›ä¸€æ­¥ä¼˜åŒ–
```javascript
// ç¼“å­˜æœºåˆ¶
class AnalysisCache {
  constructor() {
    this.cache = new Map()
  }
  
  getCacheKey(asin, reviewCount) {
    return `${asin}:${reviewCount}`
  }
  
  get(asin, reviewCount) {
    const key = this.getCacheKey(asin, reviewCount)
    const cached = this.cache.get(key)
    
    if (cached && Date.now() - cached.timestamp < 7 * 24 * 60 * 60 * 1000) {
      // 7å¤©å†…æœ‰æ•ˆ
      return cached.data
    }
    
    return null
  }
  
  set(asin, reviewCount, data) {
    const key = this.getCacheKey(asin, reviewCount)
    this.cache.set(key, {
      data,
      timestamp: Date.now()
    })
  }
}
```

---

## âš ï¸ å¸¸è§é”™è¯¯å’Œé¿å…æ–¹æ³•

### é”™è¯¯1: å¿˜è®°é”™è¯¯å¤„ç†
```javascript
// âŒ å±é™©
async function getReviews(asin) {
  const response = await fetch(`/api/${asin}`)
  return response.json()
}

// âœ… å®‰å…¨
async function getReviews(asin) {
  try {
    const response = await fetch(`/api/${asin}`)
    
    if (!response.ok) {
      throw new Error(`APIè¿”å›é”™è¯¯: ${response.status}`)
    }
    
    const data = await response.json()
    
    if (!data || !data.reviews) {
      throw new Error('è¿”å›æ•°æ®æ ¼å¼é”™è¯¯')
    }
    
    return data
    
  } catch (error) {
    logger.error('è·å–è¯„è®ºå¤±è´¥', { asin, error: error.message })
    throw new Error(`è·å–è¯„è®ºå¤±è´¥: ${error.message}`)
  }
}
```

### é”™è¯¯2: ç¡¬ç¼–ç é…ç½®
```javascript
// âŒ ç¡¬ç¼–ç 
const API_KEY = 'sk-abc123'
const API_URL = 'https://api.example.com'

// âœ… ç¯å¢ƒå˜é‡
const API_KEY = process.env.GEMINI_API_KEY
const API_URL = process.env.GEMINI_BASE_URL || 'https://aihubmix.com/v1'
```

### é”™è¯¯3: ä¸åˆç†çš„å¾ªç¯
```javascript
// âŒ ä½æ•ˆ
for (let i = 0; i < reviews.length; i++) {
  for (let j = 0; j < keywords.length; j++) {
    if (reviews[i].text.includes(keywords[j])) {
      // O(n * m * k) - kæ˜¯æ–‡æœ¬é•¿åº¦
    }
  }
}

// âœ… ä¼˜åŒ–
const keywordSet = new Set(keywords)
const regex = new RegExp(keywords.join('|'), 'gi')

reviews.forEach(review => {
  const matches = review.text.match(regex)
  // O(n * k) - å¿«å¾ˆå¤š
})
```

---

## ğŸ“Š æ€§èƒ½åŸºå‡†

### ç›®æ ‡æŒ‡æ ‡
```
çˆ¬å–100æ¡è¯„è®ºï¼š    < 20ç§’
AIåˆ†æ7ç»´åº¦ï¼š      < 20ç§’
APIå“åº”æ€»æ—¶é—´ï¼š    < 45ç§’
å‰ç«¯é¡µé¢åŠ è½½ï¼š     < 2ç§’
```

### ä¼˜åŒ–ä¼˜å…ˆçº§
1. **é«˜ä¼˜å…ˆçº§**ï¼šAPIå“åº”æ—¶é—´
2. **ä¸­ä¼˜å…ˆçº§**ï¼šå‰ç«¯æ¸²æŸ“æ€§èƒ½
3. **ä½ä¼˜å…ˆçº§**ï¼šçˆ¬è™«é€Ÿåº¦ï¼ˆå·²å¤Ÿå¿«ï¼‰

---

## ğŸ” å®‰å…¨è§„èŒƒ

### ç¯å¢ƒå˜é‡ç®¡ç†
```javascript
// âœ… æ­£ç¡®
const config = {
  geminiKey: process.env.GEMINI_API_KEY,
  apifyToken: process.env.APIFY_API_TOKEN
}

// å¯åŠ¨æ—¶éªŒè¯
if (!config.geminiKey) {
  throw new Error('GEMINI_API_KEYæœªé…ç½®')
}

// âŒ é”™è¯¯
const GEMINI_KEY = 'sk-abc123'  // æ³„éœ²å¯†é’¥
console.log(process.env.GEMINI_API_KEY)  // æ‰“å°å¯†é’¥
```

### è¾“å…¥éªŒè¯
```javascript
// âœ… éªŒè¯ASIN
function validateAsin(asin) {
  if (!asin || typeof asin !== 'string') {
    throw new Error('ASINå¿…é¡»æ˜¯å­—ç¬¦ä¸²')
  }
  
  if (!/^[A-Z0-9]{10}$/.test(asin)) {
    throw new Error('ASINæ ¼å¼é”™è¯¯ï¼ˆåº”ä¸º10ä½å­—æ¯æ•°å­—ï¼‰')
  }
  
  return asin.toUpperCase()
}

// ä½¿ç”¨
const asin = validateAsin(req.params.asin)
```

---

## ğŸ“ æ–‡æ¡£ç¼–å†™è§„èŒƒ

### JSDocæ³¨é‡Š
```javascript
/**
 * åˆ†æAmazonäº§å“è¯„è®º
 * 
 * @param {string} asin - Amazonäº§å“ASINï¼ˆ10ä½å­—æ¯æ•°å­—ï¼‰
 * @param {Object} options - é…ç½®é¡¹
 * @param {number} [options.maxReviews=Infinity] - æœ€å¤§è¯„è®ºæ•°
 * @param {Function} [options.onProgress] - è¿›åº¦å›è°ƒ
 * @returns {Promise<Object>} åˆ†æç»“æœ
 * @throws {Error} ASINæ ¼å¼é”™è¯¯æˆ–APIè°ƒç”¨å¤±è´¥
 * 
 * @example
 * const result = await analyzer.analyze('B08N5WRWNW', {
 *   maxReviews: 500,
 *   onProgress: (p) => console.log(p)
 * })
 */
async function analyze(asin, options = {}) {
  // ...
}
```

---

## ğŸ“ å­¦ä¹ èµ„æº

### é¡¹ç›®å†…éƒ¨æ–‡æ¡£
- `docs/01-é¡¹ç›®æŠ€æœ¯æ–¹æ¡ˆæ€»ä½“è®¾è®¡.md` - æ•´ä½“æ¶æ„
- `docs/02-Webç«¯è¯¦ç»†è®¾è®¡æ–¹æ¡ˆ.md` - å‰ç«¯è®¾è®¡
- `docs/03-åç«¯APIè®¾è®¡æ–‡æ¡£.md` - APIè§„èŒƒ
- `docs/çˆ¬è™«ç®€åŒ–å®Œæˆ-2025-11-07.md` - çˆ¬è™«æ¶æ„

### å¤–éƒ¨å‚è€ƒ
- [Node.jsæœ€ä½³å®è·µ](https://github.com/goldbergyoni/nodebestpractices)
- [JavaScript Clean Code](https://github.com/ryanmcdermott/clean-code-javascript)
- [Vue.jsé£æ ¼æŒ‡å—](https://vuejs.org/style-guide/)

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å¿«é€Ÿç†è§£é¡¹ç›®ï¼Ÿ
A: æŒ‰é¡ºåºé˜…è¯»ï¼š
1. README.md
2. docs/01-é¡¹ç›®æŠ€æœ¯æ–¹æ¡ˆæ€»ä½“è®¾è®¡.md
3. src/crawler/CrawlerFacade.jsï¼ˆçˆ¬è™«å…¥å£ï¼‰
4. src/ai/AnalysisService.jsï¼ˆAIåˆ†æå…¥å£ï¼‰
5. web/src/views/ReportDetail.vueï¼ˆå‰ç«¯å…¥å£ï¼‰

### Q: å¦‚ä½•æµ‹è¯•æ–°åŠŸèƒ½ï¼Ÿ
A: 
```bash
# 1. å¯åŠ¨åç«¯
npm start

# 2. å¯åŠ¨å‰ç«¯
cd web && npm run dev

# 3. æµ‹è¯•API
node tests/test-full-analysis.js

# 4. æ‰‹åŠ¨æµ‹è¯•
æ‰“å¼€Chromeæ‰©å±•ï¼Œåˆ†æä¸€ä¸ªäº§å“
```

### Q: é‡åˆ°é—®é¢˜æ€ä¹ˆåŠï¼Ÿ
A:
1. æŸ¥çœ‹æ—¥å¿—ï¼š`logs/` ç›®å½•
2. è¿è¡Œè¯Šæ–­ï¼š`node scripts/health-check.js`
3. æŸ¥çœ‹æ–‡æ¡£ï¼š`docs/` ç›®å½•
4. æœç´¢ä»£ç ï¼š`grep -r "å…³é”®è¯" src/`

---

## âœ… æ€»ç»“æ¸…å•

åœ¨å¼€å§‹å¼€å‘å‰ï¼Œç¡®è®¤ï¼š
- [ ] å·²é˜…è¯»æœ¬æ–‡æ¡£
- [ ] å·²ç†è§£é¡¹ç›®æ ¸å¿ƒæ¶æ„
- [ ] å·²æŸ¥çœ‹ç›¸å…³ä»£ç ç¤ºä¾‹
- [ ] å·²æ€è€ƒæœ€ä¼˜å®ç°æ–¹æ¡ˆ

åœ¨æäº¤ä»£ç å‰ï¼Œç¡®è®¤ï¼š
- [ ] ä»£ç é€šè¿‡æ‰€æœ‰æ£€æŸ¥æ¸…å•
- [ ] åŠŸèƒ½å·²æµ‹è¯•
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] Commit messageæ¸…æ™°

---

**æœ€åçš„è¯**ï¼š

ä»£ç è´¨é‡ > å¼€å‘é€Ÿåº¦

ç®€å•æ–¹æ¡ˆ > å¤æ‚è®¾è®¡

ä¸€è‡´æ€§ > ä¸ªäººåå¥½

**Happy Coding! ğŸš€**

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæœ¬æ–‡æ¡£åº”éšé¡¹ç›®æ¼”è¿›æŒç»­æ›´æ–°  
**åé¦ˆæ¸ é“**ï¼šGitHub Issuesæˆ–é¡¹ç›®æ–‡æ¡£PR




